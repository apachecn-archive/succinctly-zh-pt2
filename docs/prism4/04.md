# 四、虚拟计算器

现在我们已经有了构建 Prism 4 解决方案的基本出发点，我们将开始逐步更详细地了解 Prism 4。为此，我们将使用一个演示解决方案，即*虚拟计算器*。图 8 显示了解决方案的徽标顶壳形式。

![Virtual Calculator Logo Top.png](img/image012.jpg)

图 8:虚拟计算器徽标顶壳形式

| ![](img/note.png) | 注:在第 13 章中，我们将更深入地了解虚拟计算器及其与 Prism 4 的关系。 |

虚拟计算器规格

*虚拟计算器*是一个使用微软 Prism 4 框架的 WPF 解决方案。该解决方案旨在允许用户添加或减去两个数字。

我保持了业务规则的简单性，以便我们能够专注于解决方案中的 WPF 和 Prism 4 结构。

*虚拟计算器*解决方案由两种外壳形式组成，可以通过在`Bootstrapper`类中设置一个整数值(`ShellSelector`)进行互换。这两种形式的区别在于标志的位置。图 9 显示了徽标底壳形式的一个示例。

![Virtual Calculator Logo Bottom.png](img/image014.jpg)

图 9:虚拟计算器徽标底壳形式

该解决方案使用三个微软 Prism 4 模块:

*   应用标识模块
*   公司标志模块
*   数学模块

解决方案中还有三个其他项目:

*   主要项目
*   基础设施项目
*   单元测试项目

应用标识模块

应用标志模块用于显示*虚拟计算器*的应用标志图形。它是带有红色边框的图形和**虚拟计算器**文本。

公司标志模块

公司标志模块用于显示*虚拟计算器*的公司标志-动画图形。红色和黄色背景的图形和 **CL** 文本，在这种情况下代表公司标志。

数学模块

数学模块用于显示*虚拟计算器*的两个标签:加两个整数和减两个整数标签。本模块还实施解决方案的业务规则。这包括数据输入验证、用户界面更新以及加减所需的代码。

主体工程

*主*项目是解决方案的启动项目。这是执行大部分初始化的地方，也是 shell 表单所在的地方。引导程序和主配置文件也位于此项目中。

基础设施项目

基础设施项目在解决方案中是独一无二的，因为它是所有其他项目中唯一引用的项目。这是我们的全球项目，为解决方案中的其他五个项目提供服务。该项目用于向*虚拟计算器*提供业务和用户界面服务。

在使用关系型或其他类型持久数据的 Prism 4 解决方案中，基础设施项目可用于访问和修改数据。

这也是 Prism 4 全局命令和事件聚合器代码所在的地方。这些 Prism 4 设计模式可用于以松散耦合的方式在模块之间进行通信。

我们将在第 13 章中详细介绍所有这些项目。

单元测试项目

单元测试项目是解决方案中所有其他项目的单元和集成测试所在的地方。NUnit 框架被用来为这个解决方案创建单元测试。

我不会在本书中详细讨论单元测试，但是解决方案中包含了一些单元测试的例子。如果您需要下载 NUnit，请参阅第 2 章。

摘要

这六个项目提供了在*虚拟计算器*解决方案中生成用户界面和执行业务规则所需的功能。接下来的章节将解释用于创建此解决方案的代码，并让您对基于微软 WPF 的 Prism 4 解决方案有所了解。