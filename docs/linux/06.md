# 第六章权限

回顾`ls`命令提供的长列表，我们现在可以破译给定文件或目录列表的权限。权限显示在长列表的开头。

```
    $ ls -l sales.data
    -rw-r--r-- 1 jason users 10400 Jun 14 09:31 sales.data

```

权限字符串中的第一个字符显示了类型。比如`-`是常规文件，`d`是目录，`l`是符号链接。这些是你会遇到的最常见的类型。但是，下表中列出了其他文件类型。

表 4:文件类型

| 文件类型 | 标志 |
| --- | --- |
| 常规文件 | `-` |
| 阻止特殊文件 | `b` |
| 字符特殊文件 | `c` |
| 目录 | `d` |
| 符号链接 | `l` |
| 先进先出(命名管道) | `p` |
| (电源)插座 | `s` |
| 其他文件类型 | `?` |

权限字符串中剩余的字符代表三种主要的权限类型:读取、写入和执行。每个权限由一个字母表示，也称为符号。读由`r`表示，写由`w`表示，执行由`x`表示。

表 5:权限

| 许可 | 标志 |
| --- | --- |
| 阅读 | `r` |
| 写 | `w` |
| 执行 | `x` |

对于文件而不是目录，读、写和执行权限有直观的含义。读取权限允许您查看文件的内容。写权限允许您修改文件。执行权限允许您将文件作为程序运行或执行。

当涉及到目录时，读、写和执行权限的含义就不那么直观了。读取权限允许您读取目录中的文件名。写权限允许您通过重命名文件、创建文件和删除文件来更改目录中的条目。执行权限允许您`cd`或更改进入目录。查看文件和目录权限之间的以下差异。

表 6:文件和目录权限

| 许可 | 文件含义 | 目录意义 |
| --- | --- | --- |
| 阅读 | 允许读取文件。 | 允许读取目录中的文件名。 |
| 写 | 允许修改文件。 | 允许修改目录中的条目。 |
| 执行 | 允许执行文件。 | 允许访问目录中条目的内容和元数据。 |

Linux 中的所有文件都属于一个用户和一个组。这允许在三组用户之间应用唯一的权限:用户所有者、组所有者和其他人。修改权限时，这些集合可以用一个字母表示:用户所有者`u`，组所有者`g`，其他人`o`。此外，字母`a`可以代表这三个权限组。请注意，这些字符不会出现在`ls`列表中，但它们可以在更改权限时使用。

表 7:用户类别

| 种类 | 标志 |
| --- | --- |
| 用户 | `u` |
| 组 | `g` |
| 其他的 | `o` |
| 全部 | `a` |

回到我们最初的例子，我们可以查看文件`sales.data`的用户和组所有者。首先列出用户所有者，然后是组所有者。在这种情况下，`jason`是用户所有者，`users`是组所有者。

```
    $ ls -l sales.data
    -rw-r--r-- 1 jason users 10400 Jun 14 09:31 sales.data

```

每个用户都是至少一个组的成员，称为他们的主要组。但是，用户可以是许多组的成员。组用于将用户组织成逻辑集合。例如，可能会创建一个名为`sales`的组，其中包含销售部门的所有员工。然后，您可以将文件的组所有者设置为`sales`组，并允许`sales`组的成员对该文件拥有读写权限，或者任何其他权限集。

要确定您是哪个组的成员，请运行`groups`命令。如果您向`groups`命令提供另一个用户的标识作为参数，您将看到该用户所属的组列表。你也可以运行`id -Gn [user]`得到同样的结果。

```
    $ groups
    users sales
    $ id -Gn
    users sales
    $ groups tracy
    users projectx dba
    $ groups john
    users sales manager

```

## 解码权限

现在您有足够的背景信息开始解码权限字符串。权限字符串中的第一个字符是类型。接下来的三个字符表示用户(也称为文件所有者)可用的权限。接下来的三个字符表示该组可用的权限。最后三个字符代表所有其他人都可以使用的权限。

在这种情况下，秩序就有了意义。权限组将始终按以下顺序显示:用户、组和其他。在这三个权限组中，权限类型将始终按以下顺序排列:读取、写入和执行。如果特定的权限类型没有被授予，那么一个连字符(`-`)将代替它。

这里是`ls -l`显示的许可信息的彩色表示。文件类型以红色突出显示，用户权限以绿色突出显示，组权限以蓝色突出显示，其他权限以紫色突出显示。

```
    $ ls -l sales.data
    -rw-r--r-- 1 jason users 10400 Jun 14 09:31 sales.data

```

通过检查前面的示例，您可以确定文件类型是常规文件(`-`)，允许用户所有者具有读写权限(`rw-`)，授予组所有者读取权限(`r--`)，并且还允许其他人具有读取权限(`r--`)。用户所有者为`jason`，群组所有者为`users`。

如果在权限字符串的末尾碰巧有一个附加字符，则应用了一种替代的访问控制方法。尾随句点(`.`)表示 SELinux(安全增强 Linux)安全上下文已应用于文件或目录。尾随加号(`+`)表示正在使用访问控制列表。SELinux 和 ACL 超出了本书的范围。然而，你会很高兴地知道，使用这些是罕见的。如果权限有问题，请在权限字符串中查找附加的尾随字符。如果有人在场，请注意可能需要进一步调查。

```
    $ ls -l sales.data.selinux
    -rw-r--r--. 1 jason users 1040 Jun 14 09:31 sales.data.selinux
    $ ls -l sales.data.acl
    -rw-r--r--+ 1 jason users 1040 Jun 14 09:31 sales.data.acl

```

## 更改权限

权限也称为模式。命令`chmod`是“更改模式”的缩写，用于更改权限。`chmod`命令的格式是`chmod mode file`。有两种方法可以指定模式。第一种方式叫做符号模式。符号模式格式为`chmod user_category operator permission`。这是使用符号模式格式的`chmod`命令的表格视图。

表 8:更改模式命令符号

| 标志 | 描述 |
| --- | --- |
| `chmod` | 更改模式命令本身。 |
| `ugoa` | 用户类别。使用一个或多个`u`代表用户，`g`代表组，`o`代表其他，`a`代表所有。 |
| `+-=` | `+`、`-`或`=`之一。使用`+`添加权限，`-`减去权限，或者`=`明确设置权限。 |
| `rwx` | 实际权限。使用`r`中的一个或多个进行读取，`w`进行写入，`x`进行执行。 |

您可以使用用户类别和权限对来添加、减去或设置权限。例如，如果要添加组所有者的写权限，可以指定`chmod g+w file`。

```
    $ ls -l sales.data
    -rw-r--r-- 1 jason users 10400 Jun 14 09:31 sales.data
    $ chmod g+w sales.data
    $ ls -l sales.data
    -rw-rw-r-- 1 jason users 10400 Jun 14 09:31 sales.data

```

运行`chmod g+w sales.data`后，权限字符串由`-rw-r--r--`变为`-rw-rw-r--`。请记住，权限按用户、组和其他顺序显示。组权限集现在包括`w`符号，表示写权限已被授予。现在文件的所有者`jason`和`users`组的成员可以读写`sales.data`文件。下面的示例演示如何减去写权限。

```
    $ ls -l sales.data
    -rw-rw-r-- 1 jason users 10400 Jun 14 09:31 sales.data
    $ chmod g-w sales.data
    $ ls -l sales.data
    -rw-r--r-- 1 jason users 10400 Jun 14 09:31 sales.data

```

可以一次更改多个权限。例如，您可以使用`g+wx`为组所有者添加写入和执行权限。

```
    $ ls -l sales.data
    -rw-r--r-- 1 jason users 10400 Jun 14 09:31 sales.data
    $ chmod g+wx sales.data
    $ ls -l sales.data
    -rw-rwxr-- 1 jason users 10400 Jun 14 09:31 sales.data

```

您也可以一次修改多个权限组。例如，`ug+wx`将为用户和组所有者添加写和执行权限，如果他们还没有这些权限的话。在这种情况下，请注意，在执行`chmod`命令之前，用户所有者已经拥有写权限。运行`chmod`后，用户所有者仍将拥有写权限，以及新添加的执行权限。如果适用，使用`+`添加权限将始终添加权限。它不会带走他们。

```
    $ ls -l sales.data
    -rw-r--r-- 1 jason users 10400 Jun 14 09:31 sales.data
    $ chmod ug+wx sales.data
    $ ls -l sales.data
    -rwxrwxr-- 1 jason users 10400 Jun 14 09:31 sales.data

```

如果要为不同的用户类别设置不同的权限，可以用逗号分隔这些规范。您可以混合和匹配来产生您想要的权限。例如，`u=rwx,g+x`将为文件所有者设置读、写和执行权限，同时为组添加执行权限。请参见以下示例中`sales.data`的权限如何更改。

```
    $ ls -l sales.data
    -rw-r--r-- 1 jason users 10400 Jun 14 09:31 sales.data
    $ chmod u=rwx,g+x sales.data
    $ ls -l sales.data
    -rwxr-xr-- 1 jason users 10400 Jun 14 09:31 sales.data

```

如果你想设置文件可读，并且只可读，每个人，运行`chmod a=r file`。当您使用等号(`=`)时，当前权限将被指定的内容替换。在这种情况下，`a=r`为用户、组和其他设置读取权限。任何写入或执行权限都将被删除。

```
    $ ls -l sales.data
    -rw-r--r-- 1 jason users 10400 Jun 14 09:31 sales.data
    $ chmod a=r sales.data
    $ ls -l sales.data
    -r--r--r-- 1 jason users 10400 Jun 14 09:31 sales.data

```

如果您没有在等号后面指定权限，这些权限将被删除。下面是这种行为的一个例子。

```
    $ ls -l sales.data
    -rw-r--r-- 1 jason users 10400 Jun 14 09:31 sales.data
    $ chmod u=rwx,g=rx,o= sales.data
    $ ls -l sales.data
    -rwxr-x--- 1 jason users 10400 Jun 14 09:31 sales.data

```

## 基于数字的权限

用`chmod`命令指定模式的第二种方式称为八进制模式。理解符号模式会帮助你学习八进制模式。一些 Linux 用户从不超越符号权限。然而，有经验的 Linux 用户发现，从长远来看，使用八进制模式更快、更容易，因为只有少数常用权限可以轻松记忆和调用。

八进制模式权限基于二进制数字系统，也称为 base-2 数字系统。每个权限类型都被视为一个位，该位或者被设置为 off(由零(`0`)表示)，或者被设置为 on(由一(`1`)表示。在权限中，顺序有意义。权限总是按读取、写入和执行顺序排列。如果`r`、`w`和`x`都设置为 off，则二进制表示为`000`。如果都设置为开，二进制表示为`111`。为了在省略执行权限的同时表示读写权限，二进制数为`110`。

表 9:权限的基本 2 和基本 10 表示

|  | 阅读 | 写 | 执行 |
| --- | --- | --- | --- |
| 关闭的二进制和十进制值。 | `0` | `0` | `0` |
| on 的二进制值。 | `1` | `1` | `1` |
| on 的十进制值。 | `4` | `2` | `1` |

为`chmod`命令提供所需权限的十进制值。要将二进制表示转换为十进制，请记住读取等于`4`，写入等于`2`，执行等于`1`。权限数是通过将每种权限类型的值相加而确定的。例如，读取和执行权限用 5 表示，因为`4`代表读取，加上`1`代表执行，等于`5`。从零到七有八个可能的值，因此得名八进制模式。下表演示了所有八种可能的权限。

表 10:八进制权限

| 许可 | 线 | 二进制的 | 八进制的 |
| --- | --- | --- | --- |
| 没有权限 | `---` | `000` | `0` |
| 仅执行 | `--x` | `001` | `1` |
| 只写 | `-w-` | `010` | `2` |
| 写和执行 | `-wx` | `011` | `3` |
| 只读 | `r--` | `100` | `4` |
| 读取并执行 | `r-x` | `101` | `5` |
| 直读式记录 | `rw-` | `110` | `6` |
| 读取、写入和执行 | `rwx` | `111` | `7` |

记住，在权限中，顺序是有意义的。用户类别总是按以下顺序排列:用户、组和其他。一旦为每个类别确定了八进制值，就必须按此顺序指定。比如要获得`-rwxr-xr—`权限，运行`chmod 754 file`。这意味着文件的所有者拥有读、写和执行权限；文件组的成员具有读取和执行权限；而其他人只有读取权限。

表 11:给定权限的符号、二进制和十进制表示

|  | 用户 | 组 | 其他的 |
| --- | --- | --- | --- |
| 符号的 | `rwx` | `rw-` | `r--` |
| 二进制的 | `111` | `110` | `100` |
| 小数 | `7` | `6` | `4` |

## 常用权限

下表说明了最常用的权限。这五个权限集将涵盖大多数权限情况。

表 12:常用权限

| 意义 | 八进制的 | 符号的 |
| 允许文件的所有者完全控制文件。系统上没有其他人可以访问。 | `700` | `-rwx------` |
| 允许系统中的每个人执行文件，但只有所有者可以编辑它。 | `755` | `-rwxr-xr-x` |
| 允许一组人修改文件并让其他人阅读。 | `664` | `-rw-rw-r--` |
| 允许一组人修改文件，不允许其他人阅读。 | `660` | `-rw-rw----` |
| 允许系统中的每个人读取文件，但只有所有者可以编辑它。 | `644` | `-rw-r--r--` |

很多时候，Linux 操作系统的新手在许可权限方面会犯错误。他们有时会使用`777`或`666`权限授予“所有人”权限，而不是考虑所需的权限。每当您看到具有`777`或`666`权限的文件或目录时，要知道几乎总是有更好的权限集可以使用。

向文件或目录授予不必要的权限不仅会带来安全隐患，还会导致对这些文件或目录进行不必要的更改。如果一个文件有`777`权限，那么 Linux 系统上的任何人都可以编辑该文件。这可能会导致这样一种情况:当某人真正想做的只是用编辑器查看文件内容时，却意外地保存了对文件的更改。

此外，系统上的用户可以有目的地使用较弱的权限来提升权限，获得对他们不应该看到的数据的访问权限，甚至销毁数据。他们可能会在脚本或程序中插入恶意代码，然后等待系统中的其他人执行。请记住，系统上的任何人都可以执行该文件，因为包括执行权限在内的所有权限都已授予。

如果多人需要对文件的写访问权限，请利用组并限制其他人的访问权限。认为最好避免使用`777`和`666`权限模式。

## 与小组合作

让我们看看多人需要访问同一个文件的情况。例如，如果销售团队的成员需要更新名为`sales.report`的文件，可以使用`chgrp`命令将该文件的组所有者设置为名为`sales`的 Linux 组。接下来，如果您不想让系统上的其他人能够读取文件，可以将权限设置为`664` ( `rw-rw-r--`)甚至`660` ( `rw-rw---`)。从技术上来说，`774` ( `rwxrwxr--`)或者`770` ( `rwxrwx---`)权限也可以，但是由于`sales.report`不是可执行程序，所以使用`664` ( `rw-rw-r--`)或者`660` ( `rw-rw----`)更有意义。

创建文件时，会将其设置为当前用户的主要组。您可以使用`newgrp`命令覆盖此行为，但请记住，默认情况下，新文件将继承您的默认组。在下面的例子中，杰森的主要群体是`users`。`chgrp`命令的格式是`chgrp GROUP FILE`。

```
    $ nano sales.report
    $ ls -l sales.report
    -rw-r--r-- 1 jason users 6 Jun 15 20:41 sales.report
    $ chgrp sales sales.report
    $ ls -l sales.report
    -rw-r--r-- 1 jason sales 6 Jun 15 20:41 sales.report
    $ chmod 664 sales.report
    $ ls -l sales.report
    -rw-rw-r-- 1 jason sales 6 Jun 15 20:41 sales.report

```

从单个用户的主目录中共享文件可能会令人困惑。将共享数据保存在共享位置通常更容易。如果你有超级用户权限，你可以为销售团队创建一个`/usr/local/sales`目录。如果您没有这样的权限，您可以要求系统管理员为您创建该目录。共享目录的组所有者应设置为`sales`，权限应设置为`775` ( `rwxrwxr-x`)或`770` ( `rwxrwx---`)。如果销售团队之外的任何人都无权访问位于`/usr/local/sales`中的任何文件、目录或程序，请使用`770` ( `rwxrwx---`)。

```
    $ ls -ld /usr/local/sales
    drwxrwxr-x 2 root sales 4096 Jun 15 20:53 /usr/local/sales
    $ mv sales.report /usr/local/sales/
    $ ls -l /usr/local/sales
    total 4
    -rw-rw-r-- 1 jason sales 6 Jun 15 20:41 sales.report

```

## 目录权限

Linux 新手遇到的一个常见问题是目录权限不正确。目录权限通常只包含`0`、`5`和`7` s，常见的目录权限包括`755`、`700`、`770`和`750`。不正确的目录权限会阻止文件访问和文件执行。如果您确定文件的权限设置正确，请查看父目录的权限。通过在当前目录中运行`ls -ld .`，使用`cd ..`向上移动到父目录，并重复这两个步骤，直到找到问题，从而找到文件系统的根。

```
    $ ls -ld directory/
    drwxr-xr-x 2 jason users 4096 Sep 29 22:02 directory/
    $ ls -l directory/
    total 0
    -rwxr--r-- 1 jason users    0 Sep 29 22:02 testprog
    $ chmod 400 directory
    $ ls -ld directory/
    dr-------- 2 jason users 4096 Sep 29 22:02 directory/
    $ ls -l directory/
    ls: cannot access directory/testprog: Permission denied
    total 0
    -????????? ? ? ? ?            ? testprog
    $ directory/testprog
    -su: directory/testprog: Permission denied
    $ chmod 500 directory/
    $ ls -ld directory/
    dr-x------ 2 jason users 4096 Sep 29 22:02 directory/
    $ ls -l directory/
    total 0
    -rwxr--r-- 1 jason users 0    Sep 29 22:02 testprog
    $ directory/testprog
    This program ran successfully.

```

## 默认权限和文件创建掩码

文件创建掩码，也称为`umask`，决定了新文件和目录的默认权限。`umask`一般由系统管理员设置；但是，单个用户可以通过在他或她的帐户初始化文件中包含`umask`语句来覆盖该设置。

如果没有应用掩码，新目录将获得`777` ( `rwxrwxrwx`)权限，新文件将获得`666` ( `rw-rw-rw-`)权限。当`umask`应用于这些基本权限时，它会禁用或屏蔽某些权限。例如，`000`的`umask`将禁用或屏蔽零位。在这种情况下，新目录获得`777`权限，新文件获得`666`权限。在另一个极端，`777`的`umask`禁用所有权限位。新文件和目录在此实例中获得`000`权限。

`umask [-S] [mode]`如果指定，将文件创建掩码设置为模式。如果省略模式，将显示当前模式。使用`-S`参数允许`umask`用符号符号显示或设置模式。

估算`umask`模式如何影响默认权限的一个快速方法是，对于目录，从`777`中减去八进制`umask`模式；对于文件，从`666`中减去八进制`umask`模式。下面是一个`022 umask`的例子，它通常是 Linux 发行版使用的或者由系统管理员设置的默认`umask`。

表 13:创建权限估计

|  | 文件 | 目录 |
| --- | --- | --- |
| **基础权限** | `666` | `777` |
| **减去** `umask` | `-022` | `-022` |
| **创建权限** | `644` | `755` |

使用`002`的`umask`非常适合与您的小组成员一起工作。创建文件或目录时，权限允许组成员操作这些文件和目录。

表 14:创建权限估计

|  | 文件 | 目录 |
| --- | --- | --- |
| **基础权限** | `666` | `777` |
| **减去** `umask` | `-002` | `-002` |
| **创建权限** | `664` | `775` |

这里有另一个可能的`umask`用于与您的小组成员一起工作。通过使用`007`，没有权限被授予组外的用户。

表 15:创建权限估计

|  | 文件 | 目录 |
| --- | --- | --- |
| **基础权限** | `666` | `777` |
| **减去 Umask** | `-007` | `-007` |
| **创建权限** | `660` * | `770` |

同样，使用这个八进制减法是一个很好的估计。可以看到该方法随着`007`的`umask`模式而分解。实际上，为了每次都能得到准确的结果，您需要将八进制权限转换为二进制值。从那里，您在`umask`模式下使用按位“非”运算，然后对该操作和基本权限执行按位“与”运算。另一种想法是`umask`禁用指定的值。`007`的`umask`实际上意味着“禁用其他用户的所有位”`022`的`umask`表示“禁用该组和其他组的写位”

下表包含由八个掩码设置中的每一个创建的所有结果权限。请注意，最常见和最实用的`umask`模式是`022`、`002`、`077`和`007`。

表 16: `umask` s 和结果权限

| 文件权限 | 目录权限 | 二进制的 | 八进制的 |
| --- | --- | --- | --- |
| `rw-` | `rwx` | `000` | `0` |
| `rw-` | `rw-` | `001` | `1` |
| `r--` | `r-x` | `010` | `2` |
| `r--` | `r--` | `011` | `3` |
| `-w-` | `-wx` | `100` | `4` |
| `-w-` | `-w-` | `101` | `5` |
| `---` | `--x` | `110` | `6` |
| `---` | `---` | `111` | `7` |

## 特殊模式

当`umask`命令查询当前设置时，返回四个字符，而不是三个。下面的例子显示了`umask`被明确设置为`002`，但是`umask`返回`0022`。

```
    $ umask 022
    $ umask
    0022

```

到目前为止，您只被介绍了用户、组和其他的权限。但是，有一类特殊模式叫做`setuid`、`setgid`、粘性。这些特殊模式通过在通常与`umask`或`chmod`一起使用的八进制模式前添加一个字符来声明。这里重要的一点是要知道`umask 022`和`umask 0022`是一样的。同样`chmod 644`和`chmod 0644`一样。

`setuid`权限允许程序作为文件的所有者运行，而不是作为执行它的用户运行。使用该权限的一个例子是`passwd`命令。`passwd`命令允许用户更改自己的密码，但需要超级用户权限才能修改`/etc/passwd`和`/etc/shadow`文件。

使用八进制模式启用`setuid`权限时，在前面加上数字`4`。对于符号模式，使用`u+s`。

```
    $ ls -ld /usr/bin/passwd
    -rwsr-xr-x 1 root root 47032 Jul 26  2013 /usr/bin/passwd
    $ chmod 4555 script
    $ ls -l script
    -r-sr-xr-x. 1 jason users 0 Jun  7 18:11 script

```

类似于`setuid`权限，`setgid`权限允许程序以文件的组运行，而不是以执行它的用户的组运行。使用这种权限的 Linux 命令是`locate`命令。

当`setgid`用于一个目录时，它导致该目录中的新条目以与该目录相同的组创建。当使用组时，在共享目录上使用`setgid`可以防止有人意外地在他们的默认组而不是目标组中创建文件。

使用八进制模式启用`setgid`权限时，在前面加上数字`2`。对于符号模式，使用`g+s`。

```
    $ ls -l /usr/bin/locate
    -rwx--s--x 1 root slocate 35548 Oct 10  2012 /usr/bin/locate
    $ chmod 2555 script
    $ ls -l script
    -r-xr-sr-x 1 jason users 0 Jun  7 18:28 script
    $ mkdir salesdir
    $ chgrp sales salesdir
    $ chmod g+rwx salesdir
    $ ls -ld salesdir/
    drwxrwxr-x 2 jason sales 4096 Jun  7 18:29 salesdir/
    $ touch salesdir/file-before-setgid
    $ ls -l salesdir/
    total 0
    -rw-r--r-- 1 jason users 0 Jun  7 18:29 file-before-setgid
    $ chmod g+s salesdir
    $ ls -ld salesdir
    drwxrwsr-x 2 jason sales 4096 Jun  7 18:29 salesdir
    $ touch salesdir/file-after-setgid
    $ ls -l salesdir/
    total 0
    -rw-r--r-- 1 jason sales 0 Jun  7 18:30 file-after-setgid
    -rw-r--r-- 1 jason users 0 Jun  7 18:29 file-before-setgid
    $

```

粘性位阻止一个用户删除另一个用户的文件，即使他或她通常有权这样做。最常见的地方是在`/tmp`和`/var/tmp`目录中使用粘性位。

使用八进制模式启用粘性位时，在前面加上数字`1`。对于符号模式，使用`+t`。

```
    $ ls -ld /tmp
    drwxrwxrwt 11 root root 20480 Jun  6 18:17 /tmp
    $ ls -ld /var/tmp
    drwxrwxrwt 4 root root 4096 Jun  7 16:46 /var/tmp
    $ chmod 1777 tmp
    $ ls -ld tmp
    drwxrwxrwt 2 jason users 4096 Jun  7 16:50 tmp

```

表 17:特殊模式

| 许可 | 八进制的 |
| --- | --- |
| 粘性比特 | `1` |
| `setgid` | `2` |
| `setuid` | `4` |

## umask 示例

在下面的例子中，新的文件和目录是在设置`umask`后创建的。请注意，默认的文件和目录权限取决于`umask`设置。

```
    $ umask
    0022
    $ umask -S
    u=rwx,g=rx,o=rx
    $ mkdir directory
    $ touch file
    $ ls -l
    total 4
    drwxr-xr-x 2 jason users 4096 Jun  5 00:03 directory
    -rw-r--r-- 1 jason users    0 Jun  5 00:03 file
    $ rmdir directory
    $ rm file
    $ umask 007
    $ umask
    0007
    $ umask -S
    u=rwx,g=rwx,o=
    $ mkdir directory
    $ touch file
    $ ls -l
    total 4
    drwxrwx--- 2 jason users 4096 Jun  5 00:04 directory
    -rw-rw---- 1 jason users    0 Jun  5 00:04 file

```