# 一、概念概述

我们将从简单的 PDF 文档的概念概述开始。这一章旨在成为从头开始创建真实文档之前的一个简短介绍。

一个 PDF 文件可以分为四个部分:标题、正文、交叉引用表和尾部。标题将文件标记为 PDF，正文定义可见文档，交叉引用表列出文件中所有内容的位置，尾部提供如何开始读取文件的说明。

![](img/image001.png)

图 1:PDF 文档的组件

每个 PDF 文件*必须*有这四个组件。

## 表头

标题只是一个 PDF 版本号和任意二进制数据序列。二进制数据防止天真的应用程序将 PDF 处理为文本文件。这将导致文件损坏，因为 PDF 通常由纯文本和二进制数据组成(例如，二进制字体文件可以直接嵌入 PDF 中)。

## 身体

PDF 的正文包含整个可见文档。有效的 PDF 正文中需要的最少元素是:

*   页面树
*   页
*   资源
*   内容
*   目录

**页面树**作为文档的根。在最简单的情况下，它只是文档中页面的列表。每个**页面**被定义为一个独立的实体，具有元数据(例如，页面维度)以及对其资源和内容的引用，它们是单独定义的。页面树和页面对象一起创建构成文档的“纸张”。

**资源**是渲染页面所需的对象。例如，单个字体通常用于多个页面，因此将字体信息存储在外部资源中要高效得多。一个**内容**对象定义了实际显示在页面上的文本和图形。内容对象和资源共同定义了单个页面的外观。

最后，文档的**目录**告诉应用程序从哪里开始读取文档。通常，这只是指向根页面树的指针。

![](img/image002.png)

图 2:文档主体的结构

## 对照表

标题和正文之后是交叉引用表。它记录文件主体中每个对象的字节位置。这允许随机访问文档，因此在呈现页面时，只从文件中读取该页面所需的对象。这使得 pdf 比其 PostScript 前辈快得多，后者在处理之前必须读入整个文件。

## 拖车

最后，我们来看看 PDF 文档的最后一个组成部分。预告片告诉应用程序如何开始读取文件。至少，它包含三件事:

*   链接到文档根目录的目录的引用。
*   交叉引用表的位置。
*   交叉引用表的大小。

由于开始处理文档只需要一个预告片，所以 pdf 通常是从后向前读取的:首先，找到文件的结尾，然后向后读取，直到到达预告片的开头。之后，您应该拥有加载 PDF 中任何页面所需的所有信息。

## 总结

总结我们的概述，PDF 文档有一个标题、一个正文、一个交叉引用表和一个尾部。预告片作为整个文档的入口，让您可以通过交叉引用表访问任何对象，并指向文档的根目录。这些元素之间的关系如下图所示。

![](img/image003.png)

图 3:PDF 文档的结构